<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getting Started • escapement</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started">
<meta property="og:description" content="escapement">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">escapement</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/intro.html">Getting Started</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Getting Started</h1>
            
      
      
      <div class="hidden name"><code>intro.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="what-is-escapement">What is <code>escapement</code>?<a class="anchor" aria-label="anchor" href="#what-is-escapement"></a>
</h2>
<p><code>escapement</code> is an R package developed by the USFWS Alaska
Inventory and Monitoring Program for estimating salmon escapement from
photo and video double-observer count data. It was developed for
estimating sockeye salmon minimum escapement for the Alalura River at
Kodiak National Wildlife Refuge, Alaska. The functions follow methods
published in <a href="https://peerj.com/articles/2120" class="external-link">Deacy et
al. 2016</a>.</p>
</div>
<div class="section level2">
<h2 id="whats-required">What’s required?<a class="anchor" aria-label="anchor" href="#whats-required"></a>
</h2>
<p>The <code>escapement</code> package requires several programs to
function:</p>
<ol style="list-style-type: decimal">
<li><p><a href="https://cloud.r-project.org/" class="external-link">R</a> (&gt;=4.0)</p></li>
<li><p><a href="https://cran.r-project.org/bin/windows/Rtools/" class="external-link">Rtools
40</a></p></li>
<li>
<p>the <code>tinytex</code> package. To install it from R:</p>
<ol style="list-style-type: lower-alpha">
<li>
<code>if (!require("tinytex")) install.packages("tinytex")</code><br>
</li>
<li><code><a href="https://rdrr.io/pkg/tinytex/man/install_tinytex.html" class="external-link">tinytex::install_tinytex()</a></code></li>
</ol>
</li>
</ol>
<p>To install and load the package:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://devtools.r-lib.org/" class="external-link">"devtools"</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/remotes/man/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"USFWS/escapement"</span>, ref <span class="op">=</span> <span class="st">"master"</span>, build_vignettes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">escapement</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="whats-inside">What’s inside?<a class="anchor" aria-label="anchor" href="#whats-inside"></a>
</h2>
<p>The package includes functions to:</p>
<ol style="list-style-type: decimal">
<li><p>Import a raw CSV file containing hourly counts of salmon
quantified from photos and videos
(<code><a href="../reference/import_format.html">import_format()</a></code>),</p></li>
<li><p>Evaluate a candidate list of competing models (linear, segmented,
polynomial, and polynomial segmented) to estimate salmon escapement
(<code><a href="../reference/model_escapement.html">model_escapement()</a></code>),</p></li>
<li><p>Generate tables and plots of the results, and</p></li>
<li><p>Produce a dynamic parameterized report (PDF) of the results
(<code><a href="../reference/run_report.html">run_report()</a></code>).</p></li>
</ol>
</div>
<div class="section level2">
<h2 id="help">Help!<a class="anchor" aria-label="anchor" href="#help"></a>
</h2>
<p>To find a help file for any function in <code>escapement</code>, type
<code>?</code> and the name of the function. For example, to get help on
how to use the <code><a href="../reference/import_format.html">import_format()</a></code> function, type
<code><a href="../reference/import_format.html">?import_format</a></code>.</p>
</div>
<div class="section level2">
<h2 id="how-do-i-use-it">How do I use it?<a class="anchor" aria-label="anchor" href="#how-do-i-use-it"></a>
</h2>
<p>There are two general approaches to using <code>escapement</code> and
selecting which approach to take depends on your needs. The first
approach (“<em>step-wise</em>”), consists of using individual functions
to work through the steps of importing and formatting input data,
performing a statistical analysis, and creating tables and plots. This
approach would be favored if the user is interested in examining the
details of the analysis, would like to perform additional analyses not
included in the package, or would like to export the tables and plots
for a customized reporting format. The second approach (“<em>all in
one</em>”) performs all the above steps and compiles the results into a
PDF report with <code><a href="../reference/run_report.html">run_report()</a></code> function. This approach would
be favored for annual reporting of results, specific to Kodiak Refuge’s
Akalura salmon escapement survey. Below are more details on the two
approaches.</p>
<div class="section level3">
<h3 id="the-stepwise-approach">The “<em>stepwise</em>” approach<a class="anchor" aria-label="anchor" href="#the-stepwise-approach"></a>
</h3>
<div class="section level4">
<h4 id="step-1-importing-and-formatting-data-using-import_format">Step 1: Importing and formatting data using
<code>import_format()</code><a class="anchor" aria-label="anchor" href="#step-1-importing-and-formatting-data-using-import_format"></a>
</h4>
<p>The first step to using any functions in <code>escapement</code> is
to import and format data. This is done using the
<code><a href="../reference/import_format.html">import_format()</a></code> function, which takes in a CSV of data and
returns a formatted R data frame. The function requires a file directory
path to a CSV containing properly formatted data. The input CSV should
contain the following three columns:</p>
<ul>
<li>
<strong><code>date</code></strong> Sequential hourly date values
(YYYY-MM-DD hh:mm:ss) that range from the beginning of a summer season
to the end of a summer season. Multiple years of data within a single
CSV are acceptable.</li>
<li>
<strong><code>photo</code></strong> Numeric values describing the
number of salmon counted from photos. Any missing values should contain
<code>NA</code>.</li>
<li>
<strong><code>video</code></strong> Numeric values describing the
number of salmon counted from videos. Any missing values should contain
<code>NA</code>.</li>
</ul>
<p>You can find the file path to an example of a properly formatted CSV
by entering the following into the console:</p>
<p><code>system.file("extdata", "salmon_counts.csv", package = "escapement")</code></p>
<p>To import the example CSV data using the <code><a href="../reference/import_format.html">import_format()</a></code>
function, and store the output as an R data frame <code>dat</code> in
the Global Environment:</p>
<p><code>dat &lt;- import_format(system.file("extdata", "salmon_counts.csv", package = "escapement"))</code></p>
<p>You can then view <code>dat</code> data frame with
<code>View(dat)</code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/import_format.html">import_format</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"salmon_counts.csv"</span>, package <span class="op">=</span> <span class="st">"escapement"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span></span>
<span><span class="co">#&gt;                  date photo video julian_day year</span></span>
<span><span class="co">#&gt; 1 2015-06-12 01:00:00     0    NA        163 2015</span></span>
<span><span class="co">#&gt; 2 2015-06-12 02:00:00     0    NA        163 2015</span></span>
<span><span class="co">#&gt; 3 2015-06-12 03:00:00     0    NA        163 2015</span></span>
<span><span class="co">#&gt; 4 2015-06-12 04:00:00     0    NA        163 2015</span></span>
<span><span class="co">#&gt; 5 2015-06-12 05:00:00     0    NA        163 2015</span></span>
<span><span class="co">#&gt; 6 2015-06-12 06:00:00     0    NA        163 2015</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="step-2-analysis-and-model-selection">Step 2: Analysis and model selection<a class="anchor" aria-label="anchor" href="#step-2-analysis-and-model-selection"></a>
</h4>
<p>Once you have a formatted data frame of hourly photo and video counts
(See Step 1 for how to import and format data), you can analyze the data
using <code>escapement</code>. This is done using two functions:
<code><a href="../reference/model_escapement.html">model_escapement()</a></code> and <code><a href="../reference/boot_escapement.html">boot_escapement()</a></code></p>
<div class="section level5">
<h5 id="model_escapement">model_escapement()<a class="anchor" aria-label="anchor" href="#model_escapement"></a>
</h5>
<p>This function takes in a formatted data frame generated from
<code><a href="../reference/import_format.html">import_format()</a></code>, creates a list of candidate models,
evaluates these models <span class="math inline">\(\Delta\)</span>AICc,
and returns a list of objects described in detail below.</p>
<p>Analyzing data in our <code>dat</code> data frame that we imported
above would be done using:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">our_models</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/model_escapement.html">model_escapement</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span></span></code></pre></div>
<p>Taking a look inside the resulting <code>our_models</code> list:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">our_models</span><span class="op">)</span></span>
<span><span class="co">#&gt;           Length Class  Mode</span></span>
<span><span class="co">#&gt; models     4     -none- list</span></span>
<span><span class="co">#&gt; aic_table  8     aictab list</span></span>
<span><span class="co">#&gt; top_model 13     lm     list</span></span></code></pre></div>
<p>From this you can see that the <code><a href="../reference/model_escapement.html">model_escapement()</a></code>
function requires an R data frame (returned from
<code><a href="../reference/import_format.html">import_format()</a></code>) and returns a list of three objects:</p>
<ul>
<li>
<strong>models</strong><br>
A list of candidate models. The current version of
<code>escapement</code> runs four candidate models: a linear,
polynomial, linear segmented, and polynomial segmented model. Continuing
with our example above, you can view a summary of a model by typing the
name of the list returned by <code>model_escapement</code>, selecting
the <code>models</code> element, and then selecting the name of the
model. For example:</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">our_models</span><span class="op">$</span><span class="va">models</span><span class="op">$</span><span class="va">linear</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; lm(formula = video ~ photo - 1, data = datud)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Residuals:</span></span>
<span><span class="co">#&gt;     Min      1Q  Median      3Q     Max </span></span>
<span><span class="co">#&gt; -236.35  -19.95   -0.98   13.98  412.89 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;       Estimate Std. Error t value Pr(&gt;|t|)    </span></span>
<span><span class="co">#&gt; photo  13.9849     0.3642    38.4   &lt;2e-16 ***</span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Residual standard error: 50.38 on 304 degrees of freedom</span></span>
<span><span class="co">#&gt;   (6683 observations deleted due to missingness)</span></span>
<span><span class="co">#&gt; Multiple R-squared:  0.8291, Adjusted R-squared:  0.8285 </span></span>
<span><span class="co">#&gt; F-statistic:  1475 on 1 and 304 DF,  p-value: &lt; 2.2e-16</span></span></code></pre></div>
<ul>
<li>
<strong>aic_table</strong><br>
The AICc table of the candidate model set.</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">our_models</span><span class="op">$</span><span class="va">aic_table</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Model selection based on AICc:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                      K    AICc Delta_AICc AICcWt Cum.Wt       LL</span></span>
<span><span class="co">#&gt; Polynomial           3 3218.98       0.00   0.65   0.65 -1606.45</span></span>
<span><span class="co">#&gt; Segmented polynomial 4 3220.26       1.28   0.35   1.00 -1606.07</span></span>
<span><span class="co">#&gt; Linear               2 3259.49      40.50   0.00   1.00 -1627.72</span></span>
<span><span class="co">#&gt; Segmented            3 3260.30      41.31   0.00   1.00 -1627.11</span></span></code></pre></div>
<ul>
<li>
<strong>top_model</strong><br>
The most parsimonious model, based on <span class="math inline">\(\Delta\)</span>AICc.</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">our_models</span><span class="op">$</span><span class="va">top_model</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; lm(formula = video ~ photo + I(photo^2) - 1, data = datud)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;      photo  I(photo^2)  </span></span>
<span><span class="co">#&gt;     9.9985      0.1173</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="boot_escapement">boot_escapement()<a class="anchor" aria-label="anchor" href="#boot_escapement"></a>
</h5>
<p>The <code>boot_escapement</code> function takes a data frame
(produced from <code><a href="../reference/import_format.html">import_format()</a></code> and a list of models
(produced from <code><a href="../reference/model_escapement.html">model_escapement()</a></code> and calculates 95%
confidence intervals around the point estimates of salmon escapement
estimates from the top model. Running this function returns a list
containing two objects: a summary table of annual escapement estimates
with 95% CIs (<code>summary</code>) and the raw bootstrapped results
(<code>raw_boots</code>):</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">boots</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/boot_escapement.html">boot_escapement</a></span><span class="op">(</span><span class="va">dat</span>, <span class="va">our_models</span><span class="op">)</span></span>
<span><span class="co">#&gt; Total time: 6.26 sec elapsed</span></span>
<span><span class="co">#&gt; Total time: 5.77 sec elapsed</span></span>
<span><span class="co">#&gt; Total time: 5.78 sec elapsed</span></span>
<span><span class="co">#&gt; Total time: 5.61 sec elapsed</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">boots</span><span class="op">)</span></span>
<span><span class="co">#&gt;           Length Class      Mode</span></span>
<span><span class="co">#&gt; summary   4      data.frame list</span></span>
<span><span class="co">#&gt; raw_boots 2      -none-     list</span></span></code></pre></div>
<p>Here’s the <code>summary</code> table from our example:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">boots</span><span class="op">$</span><span class="va">summary</span></span>
<span><span class="co">#&gt;   year escapement  lower_ci  upper_ci</span></span>
<span><span class="co">#&gt; 1 2015   25008.48 21261.338 29401.663</span></span>
<span><span class="co">#&gt; 2 2016   34646.56 28069.384 39298.884</span></span>
<span><span class="co">#&gt; 3 2017    7057.08  5832.223  8609.050</span></span>
<span><span class="co">#&gt; 4 2018    5984.83  5146.577  6987.694</span></span></code></pre></div>
<p>You can explore the raw results by digging into
<code>raw_boots</code>. This list contains how the bootstraps were
called, the model specified, and a matrix with a row for each bootstrap
replicate of the results. For more information, see the help file for
the <code>boot</code> function in the <code>boot</code> package <a href="https://cran.r-project.org/web/packages/boot/boot.pdf" class="external-link">here</a>.</p>
</div>
</div>
<div class="section level4">
<h4 id="step-3-creating-tables-and-plots">Step 3: Creating tables and plots<a class="anchor" aria-label="anchor" href="#step-3-creating-tables-and-plots"></a>
</h4>
<p>The third step in the step-wise approach is creating tables and plots
of results. See above (<strong>aic_table</strong>) for a summary table
of AICc results. Below is a brief description of the custom plotting
functions in <code>escapement</code>.</p>
<div class="section level5">
<h5 id="explore_plots">explore_plots()<a class="anchor" aria-label="anchor" href="#explore_plots"></a>
</h5>
<p>This function returns a list containing two <code>ggplot2</code>
plots. The first (<strong>photo_counts</strong>) is series of line plot
of the raw hourly photo counts over time, grouped by year. The second
(<strong>hourly_counts</strong>) is a plot of the average photo counts
for each hour of day summarized by year.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/explore_plots.html">explore_plots</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span></span>
<span><span class="va">p</span><span class="op">$</span><span class="va">photo_counts</span></span></code></pre></div>
<p><img src="intro_files/figure-html/unnamed-chunk-10-1.png" width="624"></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span><span class="op">$</span><span class="va">hourly_counts</span></span></code></pre></div>
<p><img src="intro_files/figure-html/unnamed-chunk-10-2.png" width="624"></p>
</div>
<div class="section level5">
<h5 id="plot_topmodel">plot_topmodel()<a class="anchor" aria-label="anchor" href="#plot_topmodel"></a>
</h5>
<p>This function uses the model results from
<code>model_escapement</code> and returns a <code>ggplot2</code> scatter
plot of video and photo counts with a fitted line from the top
model.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_topmodel.html">plot_topmodel</a></span><span class="op">(</span><span class="va">our_models</span><span class="op">)</span></span></code></pre></div>
<p><img src="intro_files/figure-html/unnamed-chunk-11-1.png" width="624"></p>
</div>
<div class="section level5">
<h5 id="plot_boot_escapement">plot_boot_escapement()<a class="anchor" aria-label="anchor" href="#plot_boot_escapement"></a>
</h5>
<p>This function used the bootstrap results from
<code>boot_estimates()</code> and returns a list of <code>ggplot2</code>
plots: <code>density_estimates</code> and
<code>min_escapement</code>.</p>
<p>The <code>density_estimates</code> plot is a density plot of the
distribution of bootstrapped estimates of annual salmon escapement
grouped by year:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_boot_escapement.html">plot_boot_escapement</a></span><span class="op">(</span><span class="va">boots</span><span class="op">)</span></span>
<span><span class="va">p</span><span class="op">$</span><span class="va">density_estimates</span></span></code></pre></div>
<p><img src="intro_files/figure-html/unnamed-chunk-12-1.png" width="624"></p>
<p>The <code>min_escape</code> plot shows minimum escapement point
estimates and 95% CI bars, grouped by year:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span><span class="op">$</span><span class="va">min_escape</span></span></code></pre></div>
<p><img src="intro_files/figure-html/unnamed-chunk-13-1.png" width="624"></p>
</div>
<div class="section level5">
<h5 id="plot_daily">plot_daily()<a class="anchor" aria-label="anchor" href="#plot_daily"></a>
</h5>
<p>This function uses the salmon count data frame (from
<code><a href="../reference/import_format.html">import_format()</a></code>) and the model results from
<code>model_escapement</code> to generate a list of <code>ggplot2</code>
plots (<code>daily</code> and <code>cumul_daily</code>).</p>
<p>The <code>daily</code> plot shows estimates of daily salmon passage
over time, grouped by year:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_daily.html">plot_daily</a></span><span class="op">(</span><span class="va">dat</span>, <span class="va">our_models</span><span class="op">)</span></span>
<span><span class="va">p</span><span class="op">$</span><span class="va">daily</span></span></code></pre></div>
<p><img src="intro_files/figure-html/unnamed-chunk-14-1.png" width="624"></p>
<p>The <code>cumul_daily</code> plot shows estimates of cumulative daily
salmon passage over time, grouped by year:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span><span class="op">$</span><span class="va">cumul_daily</span></span></code></pre></div>
<p><img src="intro_files/figure-html/unnamed-chunk-15-1.png" width="624"></p>
</div>
<div class="section level5">
<h5 id="plot_hourly">plot_hourly()<a class="anchor" aria-label="anchor" href="#plot_hourly"></a>
</h5>
<p>This function uses the salmon count data frame (from
<code><a href="../reference/import_format.html">import_format()</a></code>) and the model results from
<code>model_escapement</code> to generate a <code>ggplot2</code> faceted
plot showing average hourly estimates of salmon passage within a day,
grouped by year.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_hourly.html">plot_hourly</a></span><span class="op">(</span><span class="va">dat</span>, <span class="va">our_models</span><span class="op">)</span></span></code></pre></div>
<p><img src="intro_files/figure-html/unnamed-chunk-16-1.png" width="624"></p>
</div>
</div>
</div>
<div class="section level3">
<h3 id="the-all-in-one-approach-a-report">The “<em>all-in-one</em>” approach: a report<a class="anchor" aria-label="anchor" href="#the-all-in-one-approach-a-report"></a>
</h3>
<p>This is a function developed to generate a rmarkdown report that
summarizes annual salmon escapement results. It relies on many of the
above functions for importing, formatting, analyzing, performing model
selection, and generating tables and figures. To run the function,
simply run:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/run_report.html">run_report</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>This will open a Shiny interface that looks like this:</p>
<p><img src="../inst/rmd/images/report_interface.jpg" width="100%"></p>
<p>If necessary, edit the default parameter values for the report title,
subtitle, author, refuge, email, and phone number.</p>
<p>Then, under “Input dataset”, browse to the location of the csv file
containing your hourly photo and video count data (the csv should be
formatted as required above for the <code>import_format</code>
function).</p>
<p>Next, under “Discussion and Recommendations”, browse to a txt file
containing your discussion and recommendations section of the report. It
is recommended to leave this input empty when you first run a report.
After you have reviewed the results in initial report, then draft a
discussion and recommendations section in MS Word. Save a copy of this
Word document as a txt file. NOTE: do this by opening a new txt file,
copying the text from your Word document into this txt file, and saving
it. You then rerun <code>run_report</code> with your discussion and
recommendations included.</p>
<div class="section level4">
<h4 id="adding-new-references-to-the-discussion-and-recommendations-sections">Adding new references to the discussion and recommendations
sections<a class="anchor" aria-label="anchor" href="#adding-new-references-to-the-discussion-and-recommendations-sections"></a>
</h4>
<p>If you have citations in your discussion and recommendations section
that are not found elsewhere in the document, you will need to add these
references to the bibliography. To do this, you will need to update the
default bibtex file located in the <code>escapement</code> package. You
can locate that file with the following command:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"rmd"</span>, <span class="st">"bibliography.bibtex"</span>, package <span class="op">=</span> <span class="st">"escapement"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "C:/Users/mcobb/AppData/Local/Temp/1/RtmpqCq8wJ/temp_libpath1578432c4190/escapement/rmd/bibliography.bibtex"</span></span></code></pre></div>
<p>This default bibtex file can be edited manually using a text editor
or using a bibliographic software package (e.g., EndNote). Once the new
references have been added to the default bibtex file, replace the
default bibtex file with the updated version.</p>
<p>You cite a reference in the body of the discussion and recommendation
section by adding <code>[@reference_id]</code> to the end of the
sentence, where reference_id is the reference ID listed at the top of
each bibtex record. For example, to cite Deacy et. al 2016, you would
add the record ID for that article (deacy_etal_2016) into the body of
the text (e.g.,“We following established methods
<code>[@deacy_etal_2016]</code>.”). When the bibtex file is updated,
this approach to inline citations will automatically add the citation to
the bibliography section.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by McCrea Cobb.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
